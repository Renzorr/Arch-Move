<div class="wrapper">
  <span class="counter"></span>
</div>
<div class="wrapper-2"></div>

<script>
  import { gsap } from "gsap";

  let tl = gsap.timeline();

  function startLoader() {
    let counter = document.querySelector(".counter");
    let currentValue = 0;

    function updateCounter() {
      if (currentValue === 100) return;

      currentValue += Math.floor(Math.random() * 10) + 1;

      if (currentValue > 100) currentValue = 100;

      counter.textContent = currentValue + "%";

      setTimeout(updateCounter, 70);
    }
    updateCounter();
  }

  startLoader();

  tl.to(".counter", {
    delay: 2,
    opacity: 0,
  });

  tl.to(".wrapper", {
    height: 0,
    ease: "power3.inOut",
  });

  tl.to(
    ".wrapper-2",
    {
      height: 0,
      ease: "power2.inOut",
    },
    "-=0.35"
  );

  tl.from("body", {
    overflow: "hidden"
  }, "-=0.8");
</script>

<style>
  .wrapper,
  .wrapper-2 {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100%;
    overflow: hidden;
  }

  .wrapper {
    background: var(--black);
    z-index: 99;
  }

  .wrapper-2 {
    background: var(--orange);
    z-index: 9;
  }

  .counter {
    font-family: "Playfair Display";
    font-weight: 900;
    font-size: var(--text-4xl);
    position: absolute;
    bottom: 7%;
    right: 4%;
    color: var(--orange);
  }
</style>
